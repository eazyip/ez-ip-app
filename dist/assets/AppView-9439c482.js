var H=Object.defineProperty;var O=(a,e,s)=>e in a?H(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var r=(a,e,s)=>(O(a,typeof e!="symbol"?e+"":e,s),s);import{d as V,o as k,c as m,a as n,t as w,r as x,b as E,e as S,w as $,f as y,v as g,n as _,g as l,h as I,F as z}from"./index-d59fd759.js";class d{constructor(e){r(this,"value");r(this,"base10Value");if(!d.isValid(e))throw new C(e);this.value=e,this.base10Value=parseInt(this.value,2)}static isValid(e){return!!/^[01]{32}$/.test(e)}toDecimal(){return new b(this.octets.map(e=>parseInt(e,2).toString()).join("."))}isMask(){return this.isSequentialBits(this.value.indexOf("0"),this.value.lastIndexOf("1"))}isWildCardMask(){return this.isSequentialBits(this.value.indexOf("1"),this.value.lastIndexOf("0"))}isSequentialBits(e,s){return s===-1||e===-1||s+1===e}add(e){if(this.base10Value===4294967295)throw new Error(`The binary value ${this.value} cannot be incremented by ${e.toString(2)}`);return new d((this.base10Value+e).toString(2).padStart(32,"0"))}substract(e){if(this.base10Value-e<0)throw new Error(`The binary value ${this.value} cannot be decremented by ${e.toString(2)}`);return new d((this.base10Value-e).toString(2).padStart(32,"0"))}bitwiseAnd(e){return new d(Array.from(e.value,(s,t)=>parseInt(s)&parseInt(this.value[t])).join(""))}bitwiseOr(e){return new d(Array.from(e.value,(s,t)=>parseInt(s)|parseInt(this.value[t])).join(""))}invert(){return new d(this.value.split("").map(e=>parseInt(e)^1).join(""))}get octets(){return this.value.match(/.{1,8}/g)}get dotted(){return this.octets.join(".")}}class C extends Error{constructor(e){super(`Invalid binary IPv4 address ${e}`),this.name="InvalidBinaryFormatError"}}class b{constructor(e){r(this,"value");if(!b.isValid(e))throw new q(`Invalid decimal IPv4 address ${e}`);this.value=e}static isValid(e){const s=e.split(".");return s.length!==4?!1:s.every(t=>/^\d+$/.test(t)&&Number(t)>=0&&Number(t)<=255)}toBinary(){return new d(this.octets.map(e=>e.toString(2).padStart(8,"0")).join(""))}get octets(){return this.value.split(".").map(e=>parseInt(e,10))}}class q extends Error{constructor(e){super(`Invalid decimal IPv4 address ${e}`),this.name="InvalidDecimalIpError"}}class h{constructor(e){r(this,"decimalValue");r(this,"binaryValue");typeof e=="string"&&(e.length===32?e=new d(e):e=new b(e)),e instanceof b?(this.decimalValue=e,this.binaryValue=this.decimalValue.toBinary()):(this.binaryValue=e,this.decimalValue=this.binaryValue.toDecimal())}nextAddress(){return new h(this.binaryValue.add(1))}previousAddress(){return new h(this.binaryValue.substract(1))}lesserThan(e){return this.binaryValue.base10Value<e.binaryValue.base10Value}lesserThanOrEqualTo(e){return this.binaryValue.base10Value<=e.binaryValue.base10Value}equalTo(e){return this.binaryValue.base10Value===e.binaryValue.base10Value}greaterThanOrEqualTo(e){return this.binaryValue.base10Value>=e.binaryValue.base10Value}greaterThan(e){return this.binaryValue.base10Value>e.binaryValue.base10Value}}class P extends h{constructor(e){super(e)}makeLastHostAddress(){return this.previousAddress()}}class M{constructor(e){r(this,"value");r(this,"size");r(this,"minValue",0);r(this,"maxValue",32);if(e>this.maxValue||e<this.minValue)throw new Error(`Invalid prfix value ${e}`);this.value=e,this.size=Math.pow(2,this.maxValue-this.value)-2}makeMask(){return new f(new d("1".repeat(this.value).padEnd(this.maxValue,"0")))}makeWildcard(){return new T(new d("0".repeat(this.value).padEnd(this.maxValue,"1")))}}class T extends h{constructor(e){if(super(e),!this.binaryValue.isWildCardMask())throw new Error(`Invalid wildcard mask value ${this.binaryValue.value}`)}makeMask(){return new f(this.binaryValue.invert())}makeBroadcastAddress(e){return new P(this.binaryValue.bitwiseOr(e.binaryValue))}makePrefix(){return new M(this.binaryValue.value.split("").reduce((e,s)=>e+(s==="0"?1:0),0))}}class B extends h{constructor(e){super(e)}makeFirstHostAddress(){return this.nextAddress()}}class f extends h{constructor(e){if(super(e),!this.binaryValue.isMask())throw new Error(`Invalid mask value ${this.binaryValue.value}`)}makeWildcard(){return new T(this.binaryValue.invert())}makeNetworkAddress(e){return new B(this.binaryValue.bitwiseAnd(e.binaryValue))}makePrefix(){return new M(this.binaryValue.value.split("").reduce((e,s)=>e+(s==="1"?1:0),0))}}class A{constructor(e,s){r(this,"mask");r(this,"prefix");r(this,"size");r(this,"wildcardMask");r(this,"networkAddress");r(this,"firstHostAddress");r(this,"lastHostAddress");r(this,"broadcastAddress");r(this,"subnets",new Map);this.mask=s,this.prefix=this.mask.makePrefix(),this.size=this.prefix.size,this.wildcardMask=this.mask.makeWildcard(),this.networkAddress=this.mask.makeNetworkAddress(e),this.firstHostAddress=this.networkAddress.makeFirstHostAddress(),this.broadcastAddress=this.wildcardMask.makeBroadcastAddress(e),this.lastHostAddress=this.broadcastAddress.makeLastHostAddress()}addSubnetBySize(e,s){if(this.subnets.has(e))throw new Error("Subnet name already in use");const o=new M(Math.floor(32-Math.log2(s+2))).makeMask();let i;this.subnets.size===0?i=this.networkAddress:i=Array.from(this.subnets.values())[this.subnets.size-1].subnet.broadcastAddress.nextAddress(),this.addSubnet(e,new A(i,o))}addSubnet(e,s){this.subnets.set(e,{subnet:s,inRange:this.containsSubnet(s)})}getSubnet(e){return this.subnets.get(e)}removeSubnet(e){this.subnets.delete(e)}containsSubnet(e){return this.networkAddress.lesserThanOrEqualTo(e.networkAddress)&&this.broadcastAddress.greaterThanOrEqualTo(e.broadcastAddress)}containsAddress(e){return this.networkAddress.lesserThanOrEqualTo(e)&&this.broadcastAddress.greaterThanOrEqualTo(e)}}class v extends A{constructor(s){super(s,v.maskFromClass(v._resolveClass(s)));r(this,"class");this.class=v._resolveClass(s)}static _resolveClass(s){const t=s.decimalValue.octets[0];if(t>=0&&t<=127)return"A";if(t>=128&&t<=191)return"B";if(t>=192&&t<=223)return"C";if(t>=224&&t<=239)return"D";if(t>=240&&t<=255)return"E";throw new Error(`Invalid IP address: ${s.decimalValue.value}`)}static maskFromClass(s){const t=new Map([["A","255.0.0.0"],["B","255.255.0.0"],["C","255.255.255.0"],["D","240.0.0.0"],["E","248.0.0.0"]]);return new f(new b(t.get(s)))}}const D={class:"bg-slate-300 p-1 m-1 rounded-sm text-sm font-mono"},j={class:"bg-slate-300 p-1 m-1 rounded-sm text-sm font-mono"},c=V({__name:"AddressInfo",props:{address:{type:Object,required:!1},label:{type:String,required:!0}},setup(a){return(e,s)=>{var t,o;return k(),m("div",null,[n("p",null,w(a.label),1),n("ul",null,[n("li",D,w(((t=a.address)==null?void 0:t.decimalValue.value)||""),1),n("li",j,w(((o=a.address)==null?void 0:o.binaryValue.dotted)||""),1)])])}}}),W={class:"p-2 border-green-700 border-2"},F=n("h1",{class:"text-xl"},"Classful network",-1),U=n("label",{for:"inputName"},"IP: ",-1),L={key:0},R=V({__name:"NetworkIpv4Classful",setup(a){const e=x("10.0.0.1"),s=E({network:null}),t=o=>{if(b.isValid(o)||d.isValid(o)){const i=new h(o);s.network=new v(i)}else s.network=null};return S(()=>{t(e.value)}),$(e,t),(o,i)=>(k(),m("div",W,[F,U,y(n("input",{id:"inputName","onUpdate:modelValue":i[0]||(i[0]=u=>e.value=u),class:_([s.network==null&&e.value?"text-red-500":"text-green-500","border"])},null,2),[[g,e.value]]),s.network?(k(),m("div",L,[l(c,{address:s.network.networkAddress,label:"networkAddress"},null,8,["address"]),l(c,{address:s.network.firstHostAddress,label:"firstHostAddress"},null,8,["address"]),l(c,{address:s.network.lastHostAddress,label:"lastHostAddress"},null,8,["address"]),l(c,{address:s.network.broadcastAddress,label:"broadcastAddress"},null,8,["address"]),l(c,{address:s.network.mask,label:"mask"},null,8,["address"]),l(c,{address:s.network.wildcardMask,label:"wildcardMask"},null,8,["address"]),n("div",null,"prefix: "+w(s.network.prefix.value),1),n("div",null,"size: "+w(s.network.prefix.size),1),n("div",null,"class: "+w(s.network.class),1)])):I("",!0)]))}}),G={class:"p-2 border-green-700 border-2"},J=n("h1",{class:"text-xl"},"Network",-1),K=n("label",{for:"inputName"},"IP: ",-1),Q=n("label",{for:"inputName"},"Mask: ",-1),X={key:0},Y=V({__name:"NetworkIpv4",setup(a){const e=x("172.0.0.111"),s=x("255.255.255.224"),t=E({network:null}),o=(i,u)=>{if(!b.isValid(i)&&!d.isValid(i)||!b.isValid(u)&&!d.isValid(u)){t.network=null;return}if(!new h(u).binaryValue.isMask()){t.network=null;return}const p=new h(i),N=new f(u);t.network=new A(p,N)};return S(()=>{o(e.value,s.value)}),$([e,s],([i,u])=>{o(i,u)}),(i,u)=>(k(),m("div",G,[J,K,y(n("input",{id:"inputName","onUpdate:modelValue":u[0]||(u[0]=p=>e.value=p),class:_([t.network==null&&e.value?"text-red-500":"text-green-500","border"])},null,2),[[g,e.value]]),Q,y(n("input",{id:"inputName","onUpdate:modelValue":u[1]||(u[1]=p=>s.value=p),class:_([t.network==null&&s.value?"text-red-500":"text-green-500","border"])},null,2),[[g,s.value]]),t.network?(k(),m("div",X,[l(c,{address:t.network.networkAddress,label:"networkAddress"},null,8,["address"]),l(c,{address:t.network.firstHostAddress,label:"firstHostAddress"},null,8,["address"]),l(c,{address:t.network.lastHostAddress,label:"lastHostAddress"},null,8,["address"]),l(c,{address:t.network.broadcastAddress,label:"broadcastAddress"},null,8,["address"]),l(c,{address:t.network.mask,label:"mask"},null,8,["address"]),l(c,{address:t.network.wildcardMask,label:"wildcardMask"},null,8,["address"]),n("div",null,"prefix: "+w(t.network.prefix.value),1),n("div",null,"size: "+w(t.network.prefix.size),1)])):I("",!0)]))}}),se=V({__name:"AppView",setup(a){return(e,s)=>(k(),m(z,null,[l(R),l(Y)],64))}});export{se as default};
